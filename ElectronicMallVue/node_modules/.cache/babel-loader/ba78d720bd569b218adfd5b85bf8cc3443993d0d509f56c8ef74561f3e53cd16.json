{"ast":null,"code":"import API from '../../../utils/request';\nconst url = \"/api/carousel/\";\nexport default {\n  name: \"Carousel\",\n  data() {\n    return {\n      baseApi: this.$store.state.baseApi,\n      options: [],\n      searchText: '',\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 5,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n    load() {\n      API.get(url).then(res => {\n        this.tableData = res.data || [];\n      });\n    },\n    add() {\n      this.entity = {};\n      this.tableData.length++;\n      this.dialogFormVisible = true;\n    },\n    edit(row) {\n      this.entity = JSON.parse(JSON.stringify(row));\n      this.dialogFormVisible = true;\n    },\n    save() {\n      if (this.entity.goodId == undefined || this.entity.goodId === \"\") {\n        this.$message.error(\"商品id不能为空\");\n        return;\n      }\n      if (this.entity.showOrder == undefined) {\n        this.$message.error(\"轮播顺序不能为空\");\n        return;\n      }\n      API.post(url, this.entity).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"保存成功\");\n          this.load();\n          this.dialogFormVisible = false;\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    del(id) {\n      API.delete(url + id).then(res => {\n        if (res.code === '200') {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["API","url","name","data","baseApi","$store","state","options","searchText","user","tableData","pageNum","pageSize","entity","total","dialogFormVisible","created","load","methods","handleSizeChange","handleCurrentChange","get","then","res","add","length","edit","row","JSON","parse","stringify","save","goodId","undefined","$message","error","showOrder","post","code","success","msg","del","id","delete","type","message"],"sources":["src/views/manage/good/Carousel.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <el-table :data=\"tableData\" border stripe style=\"width: 80%;margin: 2px auto\">\r\n        <el-table-column label=\"商品\">\r\n          <template slot-scope=\"scope\">\r\n            <a :href=\"'/goodView/'+scope.row.goodId\">{{scope.row.goodName}}</a>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column  label=\"图片\" >\r\n          <template   slot-scope=\"scope\">\r\n            <img :src=\"baseApi + scope.row.img\" width=\"300\" height=\"185\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"showOrder\" label=\"轮播顺序\"></el-table-column>\r\n\r\n        <el-table-column\r\n            fixed=\"right\"\r\n            label=\"操作\"\r\n            width=\"250\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" style=\"font-size: 18px;\"  @click=\"edit(scope.row)\">\r\n              \r\n               编辑</el-button>\r\n            <el-popconfirm\r\n                @confirm=\"del(scope.row.id)\"\r\n                title=\"确定删除？\"\r\n            >\r\n              <el-button type=\"danger\" slot=\"reference\" style=\"margin-left: 10px;font-size: 18px;\">\r\n               删除</el-button>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n<!--新增按钮-->\r\n    <div style=\"text-align: center\">\r\n      <el-button @click=\"add\" type=\"primary\" style=\"margin: 30px;width: 150px; font-size: 20px;\">\r\n        \r\n        新增\r\n      </el-button>\r\n    </div>\r\n    <!-- 弹窗   -->\r\n\r\n    <el-dialog title=\"信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\"\r\n               :close-on-click-modal=\"false\">\r\n      <el-form :model=\"entity\">\r\n        <el-form-item label=\"商品id\" label-width=\"150px\">\r\n          <el-input v-model=\"entity.goodId\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"轮播顺序\" label-width=\"150px\">\r\n<!--          <el-input v-model=\"entity.showOrder\" autocomplete=\"off\" style=\"width: 80%\"></el-input>-->\r\n          <el-select v-model=\"entity.showOrder\">\r\n            <el-option v-for=\"index in tableData.length\" :key=\"index\" :label=\"index\" :value=\"index\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\" style=\"font-size: 20px;\"> 取消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\" style=\"font-size: 20px;\"> 确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../../../utils/request'\r\nconst url = \"/api/carousel/\"\r\n\r\n\r\nexport default {\r\n  name: \"Carousel\",\r\n  data() {\r\n    return {\r\n      baseApi: this.$store.state.baseApi,\r\n      options: [],\r\n      searchText: '',\r\n      user: {},\r\n      tableData: [],\r\n      pageNum: 1,\r\n      pageSize: 5,\r\n      entity: {},\r\n      total: 0,\r\n      dialogFormVisible: false\r\n    };\r\n  },\r\n  created() {\r\n    this.load()\r\n  },\r\n  methods: {\r\n    handleSizeChange(pageSize) {\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n    load() {\r\n      API.get(url).then(res => {\r\n        this.tableData = res.data || []\r\n        \r\n      })\r\n    },\r\n    add() {\r\n      this.entity = {}\r\n      this.tableData.length++;\r\n      this.dialogFormVisible = true\r\n    },\r\n    edit(row) {\r\n      this.entity = JSON.parse(JSON.stringify(row))\r\n      this.dialogFormVisible = true\r\n    },\r\n    save() {\r\n      if(this.entity.goodId == undefined || this.entity.goodId === \"\") {\r\n          this.$message.error(\"商品id不能为空\")\r\n          return;\r\n      }\r\n      if(this.entity.showOrder == undefined) {\r\n          this.$message.error(\"轮播顺序不能为空\")\r\n          return;\r\n      }\r\n\r\n      API.post(url, this.entity).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success(\"保存成功\")\r\n          this.load()\r\n          this.dialogFormVisible = false\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n\r\n      })\r\n    },\r\n    del(id) {\r\n      API.delete(url + id).then(res => {\r\n        if(res.code==='200'){\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功\",\r\n          });\r\n          this.load();\r\n        }else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      })\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"],"mappings":"AAoEA,OAAAA,GAAA;AACA,MAAAC,GAAA;AAGA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,OAAA;MACAG,OAAA;MACAC,UAAA;MACAC,IAAA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,MAAA;MACAC,KAAA;MACAC,iBAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAC,iBAAAP,QAAA;MACA,KAAAA,QAAA,GAAAA,QAAA;MACA,KAAAK,IAAA;IACA;IACAG,oBAAAT,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;MACA,KAAAM,IAAA;IACA;IACAA,KAAA;MACAjB,GAAA,CAAAqB,GAAA,CAAApB,GAAA,EAAAqB,IAAA,CAAAC,GAAA;QACA,KAAAb,SAAA,GAAAa,GAAA,CAAApB,IAAA;MAEA;IACA;IACAqB,IAAA;MACA,KAAAX,MAAA;MACA,KAAAH,SAAA,CAAAe,MAAA;MACA,KAAAV,iBAAA;IACA;IACAW,KAAAC,GAAA;MACA,KAAAd,MAAA,GAAAe,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,SAAA,CAAAH,GAAA;MACA,KAAAZ,iBAAA;IACA;IACAgB,KAAA;MACA,SAAAlB,MAAA,CAAAmB,MAAA,IAAAC,SAAA,SAAApB,MAAA,CAAAmB,MAAA;QACA,KAAAE,QAAA,CAAAC,KAAA;QACA;MACA;MACA,SAAAtB,MAAA,CAAAuB,SAAA,IAAAH,SAAA;QACA,KAAAC,QAAA,CAAAC,KAAA;QACA;MACA;MAEAnC,GAAA,CAAAqC,IAAA,CAAApC,GAAA,OAAAY,MAAA,EAAAS,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAe,IAAA;UACA,KAAAJ,QAAA,CAAAK,OAAA;UACA,KAAAtB,IAAA;UACA,KAAAF,iBAAA;QACA;UACA,KAAAmB,QAAA,CAAAC,KAAA,CAAAZ,GAAA,CAAAiB,GAAA;QACA;MAEA;IACA;IACAC,IAAAC,EAAA;MACA1C,GAAA,CAAA2C,MAAA,CAAA1C,GAAA,GAAAyC,EAAA,EAAApB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAe,IAAA;UACA,KAAAJ,QAAA;YACAU,IAAA;YACAC,OAAA;UACA;UACA,KAAA5B,IAAA;QACA;UACA,KAAAiB,QAAA,CAAAC,KAAA,CAAAZ,GAAA,CAAAiB,GAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}