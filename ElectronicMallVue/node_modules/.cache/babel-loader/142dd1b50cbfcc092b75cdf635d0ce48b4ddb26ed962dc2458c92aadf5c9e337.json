{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as echarts from \"echarts\";\nexport default {\n  name: \"IncomeChart\",\n  data() {\n    return {\n      sumIncome: 0,\n      categoryIncomes: [],\n      categoryNames: [],\n      incomes: [],\n      activeName: \"bar\",\n      totalAll: 0,\n      totalWeek: 0,\n      totalMonth: 0,\n      total: 0\n    };\n  },\n  methods: {\n    handleClick(tab) {\n      switch (tab.name) {\n        case \"bar\":\n          this.total = this.totalAll;\n          break;\n        case \"pie\":\n          this.total = this.totalAll;\n          break;\n        case \"line1\":\n          this.total = this.totalWeek;\n          break;\n        case \"line2\":\n          this.total = this.totalMonth;\n          break;\n      }\n    }\n  },\n  mounted() {\n    var barChart = echarts.init(document.getElementById(\"bar\"));\n    var pieChart = echarts.init(document.getElementById(\"pie\"));\n    var lineChart1 = echarts.init(document.getElementById(\"weekLine\"));\n    var lineChart2 = echarts.init(document.getElementById(\"monthLine\"));\n    var barOption = {\n      tooltip: {\n        trigger: \"item\"\n      },\n      title: {\n        text: \"收入统计柱状图\",\n        x: \"center\"\n      },\n      label: {\n        show: true,\n        //是否显示\n        position: \"top\"\n      },\n      xAxis: {\n        type: \"category\",\n        data: []\n      },\n      yAxis: {\n        type: \"value\"\n      },\n      series: [{\n        data: [],\n        type: \"bar\"\n      }]\n    };\n    var pieOption = {\n      tooltip: {\n        trigger: \"item\"\n      },\n      title: {\n        text: \"收入统计饼图\",\n        x: \"center\"\n      },\n      series: [{\n        type: \"pie\",\n        data: []\n      }]\n    };\n    var lineOption1 = {\n      tooltip: {\n        trigger: \"item\"\n      },\n      label: {\n        show: true //是否显示\n      },\n      title: {\n        text: \"本周收入\",\n        x: \"center\"\n      },\n      xAxis: {\n        type: \"category\",\n        data: [\"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\", \"周日\"]\n      },\n      yAxis: {\n        type: \"value\"\n      },\n      series: [{\n        data: [],\n        type: \"line\"\n      }]\n    };\n    var lineOption2 = {\n      tooltip: {\n        trigger: \"item\"\n      },\n      label: {\n        show: true //是否显示\n      },\n      title: {\n        text: \"本月收入\",\n        x: \"center\"\n      },\n      xAxis: {\n        type: \"category\",\n        data: []\n      },\n      yAxis: {\n        type: \"value\"\n      },\n      series: [{\n        data: [],\n        type: \"line\"\n      }]\n    };\n    //渲染柱状图和饼图\n    this.request.get(\"/api/income/chart\").then(res => {\n      if (res.code === \"200\") {\n        let categoryIncomes = res.data.categoryIncomes;\n        let categoryNames = categoryIncomes.map(item => {\n          return item.categoryName;\n        });\n        let incomes = categoryIncomes.map(item => {\n          return item.categoryIncome;\n        });\n        barOption.xAxis.data = categoryNames;\n        barOption.series[0].data = incomes;\n        barChart.setOption(barOption);\n        for (let i = 0; i < categoryNames.length; i++) {\n          let item = {\n            value: incomes[i],\n            name: categoryNames[i]\n          };\n          pieOption.series[0].data.push(item);\n        }\n        pieChart.setOption(pieOption);\n        //计算总和\n        let sum = 0;\n        incomes.forEach(item => {\n          sum += item;\n        });\n        this.total = sum;\n        this.totalAll = sum;\n      }\n    });\n    //渲染本周折线图\n    this.request.get(\"/api/income/week\").then(res => {\n      if (res.code === \"200\") {\n        // lineOption1.xAxis.data = res.data.weekDays;\n        let weekIncome = res.data.weekIncome;\n        lineOption1.series[0].data = weekIncome;\n        lineChart1.setOption(lineOption1);\n        //计算本周总营收\n        let sum = 0;\n        weekIncome.forEach(item => {\n          sum += item;\n        });\n        this.totalWeek = sum;\n      }\n    });\n    //渲染本月折线图\n    this.request.get(\"/api/income/month\").then(res => {\n      if (res.code === \"200\") {\n        lineOption2.xAxis.data = res.data.monthDays;\n        let monthIncome = res.data.monthIncome;\n        lineOption2.series[0].data = monthIncome;\n        lineChart2.setOption(lineOption2);\n        //计算本月总营收\n        let sum = 0;\n        monthIncome.forEach(item => {\n          sum += item;\n        });\n        this.totalMonth = sum;\n      }\n    });\n  },\n  filters: {\n    numFilter(value) {\n      // 截取当前数据到小数点后两位\n\n      let realVal = Number(value).toFixed(2);\n\n      // num.toFixed(2)获取的是字符串\n\n      return Number(realVal);\n    }\n  }\n};","map":{"version":3,"names":["echarts","name","data","sumIncome","categoryIncomes","categoryNames","incomes","activeName","totalAll","totalWeek","totalMonth","total","methods","handleClick","tab","mounted","barChart","init","document","getElementById","pieChart","lineChart1","lineChart2","barOption","tooltip","trigger","title","text","x","label","show","position","xAxis","type","yAxis","series","pieOption","lineOption1","lineOption2","request","get","then","res","code","map","item","categoryName","categoryIncome","setOption","i","length","value","push","sum","forEach","weekIncome","monthDays","monthIncome","filters","numFilter","realVal","Number","toFixed"],"sources":["src/views/manage/income/IncomeChart.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n      <div\r\n        id=\"chartSum\"\r\n        style=\"\r\n          display: inline-block;\r\n          margin-left: 50px;\r\n          margin-top: 30px;\r\n          font-weight: bold;\r\n          font-size: 22px;\r\n          color: #ffb02a;\r\n          border: 1px lightgrey solid;\r\n          border-radius: 10px;\r\n          padding: 20px;\r\n        \"\r\n        \r\n        > 总计：￥{{ total | numFilter }}</div\r\n      >\r\n      <!--      柱状图-->\r\n      <el-tab-pane label=\"各类收入柱状图\" name=\"bar\">\r\n        <div\r\n          id=\"bar\"\r\n          style=\"width: 1200px; height: 500px; margin: auto auto\"\r\n        ></div>\r\n      </el-tab-pane>\r\n      <!--      饼图-->\r\n      <el-tab-pane label=\"各类收入饼图\" name=\"pie\">\r\n        <div\r\n          id=\"pie\"\r\n          style=\"width: 600px; height: 600px; margin: 10px auto\"\r\n        ></div>\r\n      </el-tab-pane>\r\n      <!--  本周收入折线图-->\r\n      <el-tab-pane label=\"本周收入\" name=\"line1\">\r\n        <div\r\n          id=\"weekLine\"\r\n          style=\"width: 900px; height: 500px; margin: 10px auto\"\r\n        ></div>\r\n      </el-tab-pane>\r\n      <!-- 本月收入折线图-->\r\n      <el-tab-pane label=\"本月收入\" name=\"line2\">\r\n        <div\r\n          id=\"monthLine\"\r\n          style=\"width: 1500px; height: 500px; margin: 10px auto\"\r\n        ></div>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from \"echarts\";\r\n\r\nexport default {\r\n  name: \"IncomeChart\",\r\n  data() {\r\n    return {\r\n      sumIncome: 0,\r\n      categoryIncomes: [],\r\n      categoryNames: [],\r\n      incomes: [],\r\n      activeName: \"bar\",\r\n      totalAll: 0,\r\n      totalWeek: 0,\r\n      totalMonth: 0,\r\n      total: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    handleClick(tab) {\r\n      switch (tab.name) {\r\n        case \"bar\":\r\n          this.total = this.totalAll;\r\n          break;\r\n        case \"pie\":\r\n          this.total = this.totalAll;\r\n          break;\r\n        case \"line1\":\r\n          this.total = this.totalWeek;\r\n          break;\r\n        case \"line2\":\r\n          this.total = this.totalMonth;\r\n          break;\r\n      }\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    var barChart = echarts.init(document.getElementById(\"bar\"));\r\n    var pieChart = echarts.init(document.getElementById(\"pie\"));\r\n    var lineChart1 = echarts.init(document.getElementById(\"weekLine\"));\r\n    var lineChart2 = echarts.init(document.getElementById(\"monthLine\"));\r\n    var barOption = {\r\n      tooltip: {\r\n        trigger: \"item\",\r\n      },\r\n      title: {\r\n        text: \"收入统计柱状图\",\r\n        x: \"center\",\r\n      },\r\n      label: {\r\n        show: true, //是否显示\r\n        position: \"top\",\r\n      },\r\n      xAxis: {\r\n        type: \"category\",\r\n        data: [],\r\n      },\r\n      yAxis: {\r\n        type: \"value\",\r\n      },\r\n      series: [\r\n        {\r\n          data: [],\r\n          type: \"bar\",\r\n        },\r\n      ],\r\n    };\r\n    var pieOption = {\r\n      tooltip: {\r\n        trigger: \"item\",\r\n      },\r\n\r\n      title: {\r\n        text: \"收入统计饼图\",\r\n        x: \"center\",\r\n      },\r\n      series: [\r\n        {\r\n          type: \"pie\",\r\n          data: [],\r\n        },\r\n      ],\r\n    };\r\n    var lineOption1 = {\r\n      tooltip: {\r\n        trigger: \"item\",\r\n      },\r\n      label: {\r\n        show: true, //是否显示\r\n      },\r\n      title: {\r\n        text: \"本周收入\",\r\n        x: \"center\",\r\n      },\r\n      xAxis: {\r\n        type: \"category\",\r\n        data: [\"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\", \"周日\"],\r\n      },\r\n      yAxis: {\r\n        type: \"value\",\r\n      },\r\n      series: [\r\n        {\r\n          data: [],\r\n          type: \"line\",\r\n        },\r\n      ],\r\n    };\r\n    var lineOption2 = {\r\n      tooltip: {\r\n        trigger: \"item\",\r\n      },\r\n      label: {\r\n        show: true, //是否显示\r\n      },\r\n      title: {\r\n        text: \"本月收入\",\r\n        x: \"center\",\r\n      },\r\n      xAxis: {\r\n        type: \"category\",\r\n        data: [],\r\n      },\r\n      yAxis: {\r\n        type: \"value\",\r\n      },\r\n      series: [\r\n        {\r\n          data: [],\r\n          type: \"line\",\r\n        },\r\n      ],\r\n    };\r\n    //渲染柱状图和饼图\r\n    this.request.get(\"/api/income/chart\").then((res) => {\r\n      if (res.code === \"200\") {\r\n        let categoryIncomes = res.data.categoryIncomes;\r\n        let categoryNames = categoryIncomes.map((item) => {\r\n          return item.categoryName;\r\n        });\r\n        let incomes = categoryIncomes.map((item) => {\r\n          return item.categoryIncome;\r\n        });\r\n        barOption.xAxis.data = categoryNames;\r\n        barOption.series[0].data = incomes;\r\n        barChart.setOption(barOption);\r\n\r\n        for (let i = 0; i < categoryNames.length; i++) {\r\n          let item = { value: incomes[i], name: categoryNames[i] };\r\n          pieOption.series[0].data.push(item);\r\n        }\r\n        pieChart.setOption(pieOption);\r\n        //计算总和\r\n        let sum = 0;\r\n        incomes.forEach((item) => {\r\n          sum += item;\r\n        });\r\n        this.total = sum;\r\n        this.totalAll = sum;\r\n      }\r\n    });\r\n    //渲染本周折线图\r\n    this.request.get(\"/api/income/week\").then((res) => {\r\n      if (res.code === \"200\") {\r\n        // lineOption1.xAxis.data = res.data.weekDays;\r\n        let weekIncome = res.data.weekIncome;\r\n        lineOption1.series[0].data = weekIncome;\r\n        lineChart1.setOption(lineOption1);\r\n        //计算本周总营收\r\n        let sum = 0;\r\n        weekIncome.forEach((item) => {\r\n          sum += item;\r\n        });\r\n        this.totalWeek = sum;\r\n      }\r\n    });\r\n    //渲染本月折线图\r\n    this.request.get(\"/api/income/month\").then((res) => {\r\n      if (res.code === \"200\") {\r\n        lineOption2.xAxis.data = res.data.monthDays;\r\n        let monthIncome = res.data.monthIncome;\r\n        lineOption2.series[0].data = monthIncome;\r\n        lineChart2.setOption(lineOption2);\r\n        //计算本月总营收\r\n        let sum = 0;\r\n        monthIncome.forEach((item) => {\r\n          sum += item;\r\n        });\r\n        this.totalMonth = sum;\r\n      }\r\n    });\r\n    \r\n  },\r\n  filters: {\r\n    numFilter(value) {\r\n      // 截取当前数据到小数点后两位\r\n\r\n      let realVal = Number(value).toFixed(2);\r\n\r\n      // num.toFixed(2)获取的是字符串\r\n\r\n      return Number(realVal);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}