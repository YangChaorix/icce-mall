{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport API from \"../../utils/request\";\nconst url = \"/api/order/\";\nexport default {\n  name: \"Order\",\n  data() {\n    return {\n      options: [],\n      searchMode: \"\",\n      searchText: \"\",\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 8,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false,\n      detail: [],\n      baseApi: this.$store.state.baseApi\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n    reset() {\n      this.searchMode = \"\";\n      this.searchText = \"\";\n      this.load();\n    },\n    load() {\n      API.get(url + \"/page\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          orderNo: this.searchText,\n          state: this.searchMode\n        }\n      }).then(res => {\n        this.tableData = res.data.records || [];\n        this.total = res.data.total;\n      }).catch(e => {\n        if (e.response.data == undefined) {\n          this.$message({\n            showClose: true,\n            message: e,\n            type: \"error\",\n            duration: 5000\n          });\n        } else {\n          this.$message({\n            showClose: true,\n            message: e.response.data,\n            type: \"error\",\n            duration: 5000\n          });\n        }\n      });\n    },\n    showDetail(row) {\n      this.request.get(\"/api/order/orderNo/\" + row.orderNo).then(res => {\n        if (res.code === \"200\") {\n          this.detail = [];\n          this.detail.push(res.data);\n          this.dialogFormVisible = true;\n        }\n      });\n    },\n    //发货\n    delivery(order) {\n      this.request.get(\"/api/order/delivery/\" + order.orderNo).then(res => {\n        if (res.code === \"200\") {\n          this.$message.success(\"成功发货\");\n          order.state = \"已发货\";\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["API","url","name","data","options","searchMode","searchText","user","tableData","pageNum","pageSize","entity","total","dialogFormVisible","detail","baseApi","$store","state","created","load","methods","handleSizeChange","handleCurrentChange","reset","get","params","orderNo","then","res","records","catch","e","response","undefined","$message","showClose","message","type","duration","showDetail","row","request","code","push","delivery","order","success"],"sources":["src/views/manage/Order.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div>\r\n            <el-select\r\n                v-model=\"searchMode\"\r\n                placeholder=\"请选择订单类型\"\r\n                style=\"width: 150px; margin-right: 10px\"\r\n            >\r\n                <el-option value=\"已支付\" label=\"已支付\"></el-option>\r\n                <el-option value=\"已发货\" label=\"已发货\"></el-option>\r\n                <el-option value=\"已收货\" label=\"已收货\"></el-option>\r\n            </el-select>\r\n            <el-input\r\n                v-model=\"searchText\"\r\n                @keyup.enter.native=\"load\"\r\n                style=\"width: 200px\"\r\n            >\r\n                <i slot=\"prefix\" class=\"el-input__icon iconfont icon-r-find\"></i\r\n            ></el-input>\r\n            <el-button @click=\"reset\" type=\"warning\" style=\"margin: 10px\">\r\n                \r\n                重置\r\n            </el-button>\r\n            <el-button @click=\"load\" type=\"primary\" style=\"margin: 10px\">\r\n                \r\n                搜索\r\n            </el-button>\r\n        </div>\r\n        <el-table :data=\"tableData\" border stripe style=\"width: 100%\">\r\n            <el-table-column prop=\"id\" label=\"ID\" width=\"50\" sortable>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"orderNo\"\r\n                label=\"订单编号\"\r\n                width=\"200\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"totalPrice\"\r\n                label=\"总价\"\r\n                width=\"100\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"userId\"\r\n                label=\"下单人id\"\r\n                width=\"100\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"linkUser\"\r\n                label=\"联系人\"\r\n                width=\"150\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"linkPhone\"\r\n                label=\"联系电话\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"linkAddress\"\r\n                label=\"送货地址\"\r\n                width=\"300\"\r\n            ></el-table-column>\r\n            <el-table-column prop=\"state\" label=\"状态\" width=\"100\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag\r\n                        type=\"success\"\r\n                        v-if=\"scope.row.state === '已支付'\"\r\n                        >{{ scope.row.state }}</el-tag\r\n                    >\r\n                    <el-tag\r\n                        type=\"primary\"\r\n                        v-if=\"scope.row.state === '已发货'\"\r\n                        >{{ scope.row.state }}</el-tag\r\n                    >\r\n                    <el-tag type=\"info\" v-if=\"scope.row.state === '已收货'\">{{\r\n                        scope.row.state\r\n                    }}</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"createTime\"\r\n                label=\"下单时间\"\r\n            ></el-table-column>\r\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"260\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        @click=\"showDetail(scope.row)\"\r\n                    >\r\n                        详情\r\n                    </el-button>\r\n                    <el-popconfirm\r\n                        @confirm=\"delivery(scope.row)\"\r\n                        title=\"确定发货吗？\"\r\n                        v-if=\"scope.row.state === '已支付'\"\r\n                    >\r\n                        <el-button\r\n                            type=\"primary\"\r\n                            style=\"margin-left: 10px\"\r\n                            slot=\"reference\"\r\n                        >\r\n                            发货\r\n                        </el-button>\r\n                    </el-popconfirm>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <!--    分页-->\r\n        <div style=\"margin-top: 10px\">\r\n            <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"pageNum\"\r\n                :page-size=\"pageSize\"\r\n                :page-sizes=\"[3, 5, 8, 10]\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"total\"\r\n            >\r\n            </el-pagination>\r\n        </div>\r\n        <!--    详情弹窗-->\r\n        <el-dialog :visible.sync=\"dialogFormVisible\">\r\n            <el-table :data=\"detail\" background-color=\"black\">\r\n                <el-table-column label=\"图片\" width=\"150\">\r\n                    <template slot-scope=\"scope\">\r\n                        <img\r\n                            :src=\"baseApi + scope.row.img\"\r\n                            min-width=\"100\"\r\n                            height=\"100\"\r\n                        />\r\n                    </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column prop=\"goodId\" label=\"商品id\"></el-table-column>\r\n                <el-table-column\r\n                    prop=\"goodName\"\r\n                    label=\"商品名称\"\r\n                ></el-table-column>\r\n                <el-table-column\r\n                    prop=\"standard\"\r\n                    label=\"商品规格\"\r\n                ></el-table-column>\r\n                <el-table-column prop=\"price\" label=\"单价\"></el-table-column>\r\n                <el-table-column prop=\"discount\" label=\"折扣\"></el-table-column>\r\n                <el-table-column label=\"实价\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{ scope.row.price * scope.row.discount }}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"count\" label=\"数量\"></el-table-column>\r\n                <el-table-column label=\"总价\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{\r\n                            scope.row.price *\r\n                            scope.row.discount *\r\n                            scope.row.count\r\n                        }}\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"../../utils/request\";\r\nconst url = \"/api/order/\";\r\n\r\n\r\nexport default {\r\n    name: \"Order\",\r\n    data() {\r\n        return {\r\n            options: [],\r\n            searchMode: \"\",\r\n            searchText: \"\",\r\n            user: {},\r\n            tableData: [],\r\n            pageNum: 1,\r\n            pageSize: 8,\r\n            entity: {},\r\n            total: 0,\r\n            dialogFormVisible: false,\r\n            detail: [],\r\n            baseApi: this.$store.state.baseApi,\r\n        };\r\n    },\r\n    created() {\r\n        this.load();\r\n    },\r\n    methods: {\r\n        handleSizeChange(pageSize) {\r\n            this.pageSize = pageSize;\r\n            this.load();\r\n        },\r\n        handleCurrentChange(pageNum) {\r\n            this.pageNum = pageNum;\r\n            this.load();\r\n        },\r\n        reset() {\r\n            this.searchMode = \"\";\r\n            this.searchText = \"\";\r\n            this.load();\r\n        },\r\n        load() {\r\n            API.get(url + \"/page\", {\r\n                params: {\r\n                    pageNum: this.pageNum,\r\n                    pageSize: this.pageSize,\r\n                    orderNo: this.searchText,\r\n                    state: this.searchMode,\r\n                },\r\n            })\r\n                .then((res) => {\r\n                    this.tableData = res.data.records || [];\r\n                    this.total = res.data.total;\r\n                    \r\n                })\r\n                .catch((e) => {\r\n                    if (e.response.data == undefined) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            message: e,\r\n                            type: \"error\",\r\n                            duration: 5000,\r\n                        });\r\n                    } else {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            message: e.response.data,\r\n                            type: \"error\",\r\n                            duration: 5000,\r\n                        });\r\n                    }\r\n                    \r\n                });\r\n        },\r\n        showDetail(row) {\r\n            this.request\r\n                .get(\"/api/order/orderNo/\" + row.orderNo)\r\n                .then((res) => {\r\n                    if (res.code === \"200\") {\r\n                        this.detail = [];\r\n                        this.detail.push(res.data);\r\n                        this.dialogFormVisible = true;\r\n                    }\r\n                });\r\n        },\r\n        //发货\r\n        delivery(order) {\r\n            this.request\r\n                .get(\"/api/order/delivery/\" + order.orderNo)\r\n                .then((res) => {\r\n                    if (res.code === \"200\") {\r\n                        this.$message.success(\"成功发货\");\r\n                        order.state = \"已发货\";\r\n                    }\r\n                });\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"],"mappings":";AAmKA,OAAAA,GAAA;AACA,MAAAC,GAAA;AAGA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,UAAA;MACAC,UAAA;MACAC,IAAA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,MAAA;MACAC,KAAA;MACAC,iBAAA;MACAC,MAAA;MACAC,OAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF;IACA;EACA;EACAG,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAC,iBAAAX,QAAA;MACA,KAAAA,QAAA,GAAAA,QAAA;MACA,KAAAS,IAAA;IACA;IACAG,oBAAAb,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;MACA,KAAAU,IAAA;IACA;IACAI,MAAA;MACA,KAAAlB,UAAA;MACA,KAAAC,UAAA;MACA,KAAAa,IAAA;IACA;IACAA,KAAA;MACAnB,GAAA,CAAAwB,GAAA,CAAAvB,GAAA;QACAwB,MAAA;UACAhB,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAgB,OAAA,OAAApB,UAAA;UACAW,KAAA,OAAAZ;QACA;MACA,GACAsB,IAAA,CAAAC,GAAA;QACA,KAAApB,SAAA,GAAAoB,GAAA,CAAAzB,IAAA,CAAA0B,OAAA;QACA,KAAAjB,KAAA,GAAAgB,GAAA,CAAAzB,IAAA,CAAAS,KAAA;MAEA,GACAkB,KAAA,CAAAC,CAAA;QACA,IAAAA,CAAA,CAAAC,QAAA,CAAA7B,IAAA,IAAA8B,SAAA;UACA,KAAAC,QAAA;YACAC,SAAA;YACAC,OAAA,EAAAL,CAAA;YACAM,IAAA;YACAC,QAAA;UACA;QACA;UACA,KAAAJ,QAAA;YACAC,SAAA;YACAC,OAAA,EAAAL,CAAA,CAAAC,QAAA,CAAA7B,IAAA;YACAkC,IAAA;YACAC,QAAA;UACA;QACA;MAEA;IACA;IACAC,WAAAC,GAAA;MACA,KAAAC,OAAA,CACAjB,GAAA,yBAAAgB,GAAA,CAAAd,OAAA,EACAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAc,IAAA;UACA,KAAA5B,MAAA;UACA,KAAAA,MAAA,CAAA6B,IAAA,CAAAf,GAAA,CAAAzB,IAAA;UACA,KAAAU,iBAAA;QACA;MACA;IACA;IACA;IACA+B,SAAAC,KAAA;MACA,KAAAJ,OAAA,CACAjB,GAAA,0BAAAqB,KAAA,CAAAnB,OAAA,EACAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAc,IAAA;UACA,KAAAR,QAAA,CAAAY,OAAA;UACAD,KAAA,CAAA5B,KAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}