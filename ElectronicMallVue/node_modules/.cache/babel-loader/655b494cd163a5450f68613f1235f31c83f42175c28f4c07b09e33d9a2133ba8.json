{"ast":null,"code":"import Navagation from \"@/components/Navagation\";\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Front\",\n  data() {\n    return {\n      user: {},\n      role: 'user',\n      loginStatus: false\n    };\n  },\n  methods: {\n    getUser() {\n      let username = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\";\n      if (username) {\n        // 从后台获取User数据\n        this.request.get(\"/userinfo/\" + username).then(res => {\n          // 重新赋值后台的最新User数据\n          this.user = res.data;\n          console.log(this.user.role);\n        });\n      }\n    }\n  },\n  components: {\n    Navagation\n  },\n  created() {\n    if (localStorage.getItem(\"user\")) {\n      request.post(\"http://localhost:9191/role\").then(res => {\n        if (res.code === '200') {\n          this.role = res.data;\n          if (localStorage.getItem(\"user\")) {\n            this.user = JSON.parse(localStorage.getItem(\"user\"));\n            this.loginStatus = true;\n          }\n        } else {\n          this.user = {\n            nickname: '您未登录',\n            avatarUrl: null\n          };\n          localStorage.removeItem('user');\n          this.loginStatus = false;\n        }\n      });\n    } else {\n      this.user = {\n        nickname: '您未登录',\n        avatarUrl: null\n      };\n      this.loginStatus = false;\n    }\n  }\n};","map":{"version":3,"names":["Navagation","request","name","data","user","role","loginStatus","methods","getUser","username","localStorage","getItem","JSON","parse","get","then","res","console","log","components","created","post","code","nickname","avatarUrl","removeItem"],"sources":["src/views/front/Front.vue"],"sourcesContent":["<!--\r\n * @Description: \r\n * @Author: \r\n * @Date: 2024-03-26 15:27:05\r\n-->\r\n<template>\r\n  <el-container style=\"height: 100%;width:100%;\">\r\n    <el-header style=\"background-color: white\">\r\n      <Navagation :user=\"user\"\r\n                  :role=\"role\"\r\n                  :login-status=\"loginStatus\"\r\n      ></Navagation>\r\n    </el-header>\r\n\r\n\r\n    <el-main style=\"background-color: lightgrey;width:100%;\">\r\n\r\n      <router-view />\r\n    </el-main>\r\n\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Navagation from \"@/components/Navagation\";\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"Front\",\r\n  data(){\r\n    return{\r\n      user:{},\r\n      role: 'user',\r\n      loginStatus: false,\r\n    }\r\n  },\r\n  methods: {\r\n    getUser() {\r\n      let username = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\"\r\n      if (username) {\r\n        // 从后台获取User数据\r\n        this.request.get(\"/userinfo/\" + username).then(res => {\r\n          // 重新赋值后台的最新User数据\r\n          this.user = res.data\r\n          console.log(this.user.role)\r\n        })\r\n      }\r\n\r\n    },\r\n  },\r\n\r\n\r\n  components:{\r\n    Navagation,\r\n  },\r\n  created() {\r\n    if(localStorage.getItem(\"user\")){\r\n      request.post(\"http://localhost:9191/role\").then(res=> {\r\n        if (res.code === '200') {\r\n          this.role = res.data;\r\n          if (localStorage.getItem(\"user\")) {\r\n            this.user = JSON.parse(localStorage.getItem(\"user\"));\r\n            this.loginStatus = true;\r\n          }\r\n        } else {\r\n          this.user = {nickname: '您未登录', avatarUrl: null};\r\n          localStorage.removeItem('user')\r\n          this.loginStatus = false;\r\n        }\r\n      })\r\n    }else{\r\n      this.user = {nickname: '您未登录', avatarUrl: null};\r\n      this.loginStatus = false;\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"../../resource/css/search.css\";\r\n.image {\r\n  width: 100%;\r\n  display: block;\r\n}\r\n</style>"],"mappings":"AAyBA,OAAAA,UAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,IAAA;MACAC,WAAA;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,IAAAC,QAAA,GAAAC,YAAA,CAAAC,OAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA,UAAAF,QAAA;MACA,IAAAA,QAAA;QACA;QACA,KAAAR,OAAA,CAAAa,GAAA,gBAAAL,QAAA,EAAAM,IAAA,CAAAC,GAAA;UACA;UACA,KAAAZ,IAAA,GAAAY,GAAA,CAAAb,IAAA;UACAc,OAAA,CAAAC,GAAA,MAAAd,IAAA,CAAAC,IAAA;QACA;MACA;IAEA;EACA;EAGAc,UAAA;IACAnB;EACA;EACAoB,QAAA;IACA,IAAAV,YAAA,CAAAC,OAAA;MACAV,OAAA,CAAAoB,IAAA,+BAAAN,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAM,IAAA;UACA,KAAAjB,IAAA,GAAAW,GAAA,CAAAb,IAAA;UACA,IAAAO,YAAA,CAAAC,OAAA;YACA,KAAAP,IAAA,GAAAQ,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA;YACA,KAAAL,WAAA;UACA;QACA;UACA,KAAAF,IAAA;YAAAmB,QAAA;YAAAC,SAAA;UAAA;UACAd,YAAA,CAAAe,UAAA;UACA,KAAAnB,WAAA;QACA;MACA;IACA;MACA,KAAAF,IAAA;QAAAmB,QAAA;QAAAC,SAAA;MAAA;MACA,KAAAlB,WAAA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}